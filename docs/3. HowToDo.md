## Guide simplifiÃ© : Python ðŸ¡’ Docker ðŸ¡’ Docker Compose ðŸ¡’ Makefile  
*(pensÃ© pour unÂ·e dÃ©butantÂ·e)*

---

### 1. PrÃ©parer lâ€™application Python

```bash
# 1) CrÃ©er et activer un environnement virtuel
python -m venv .venv
source .venv/bin/activate      # (Windows : .venv\Scripts\activate)

# 2) Installer les dÃ©pendances
pip install --upgrade pip
pip install -r requirements.txt
```

> **Pourquoi ?**  
> Lâ€™environnement virtuel Ã©vite de polluer le Python systÃ¨me ; tout reste contenu dans le dossier `.venv`.

---

### 2. Docker de base

| Commande | Effet | Options utiles |
|----------|-------|----------------|
| `docker build -t monapp:latest .` | Construit lâ€™image Ã  partir du `Dockerfile` courant. | `-t` : nom et tag<br>`.` : contexte de build |
| `docker run --rm -it monapp:latest` | Lance un conteneur interactif puis le supprime Ã  lâ€™arrÃªt. | `-d` : **d**Ã©tachÃ© (arriÃ¨re-plan)<br>`-p 8080:8080` : publie un port<br>`--name mydemo` : nom lisible |

> **Astuce** : le flag `-d` (detached) fait tourner le conteneur Â« en arriÃ¨re-plan Â» ; combinez-le avec `docker logs -f <id>` pour suivre la sortie.

---

### 3. Docker Compose

*Lancer toute lâ€™infra dÃ©crite dans un ou plusieurs fichiers Compose.*

- **Simple :**

  ```bash
  docker compose up -d           # lit le docker-compose.yml par dÃ©faut
  ```

- **Multi-fichiers (overlay)** :

  ```bash
  docker compose \
      -f base.yml \
      -f monitoring.yml \
      -f workflow-attacker.yml \
      up -d
  ```

  1. Les fichiers sont **fusionnÃ©s de gauche Ã  droite**.  
  2. Une clÃ© dÃ©jÃ  dÃ©finie est **Ã©crasÃ©e** par la mÃªme clÃ© du fichier suivant.  
  3. Vous pouvez donc :  
     * *surcharger* un service existant (changer lâ€™image, ajouter des volumes).  
     * *ajouter* de nouveaux services sans toucher aux autres fichiers.

---

### 4. Makefile : automatiser sans rÃ©flÃ©chir

> **Objectif :** encapsuler vos scÃ©narios dans des cibles courtes (ex. `make start`).

```makefile
# -------- variables rÃ©utilisables --------
DOCKER:= @docker
IMAGE=custum-network-analysis
REGISTRY=registry.gitlab.com/maissacrement
VERSION=1.0.0

new-workflow-attacker:
    # Here your script
    echo "bonjour depuis make nous allons lancez le workflow 'new-workflow-attacker'"

### Execute workflow shell ###

workflow-attack-example:
	docker compose -f ./monitoring.yml -f ./docker-compose.yml -f ./nginx-workflow.yml up --build

```

#### Points clÃ©s pour dÃ©butants

| Concept | Pourquoi câ€™est utile ? |
|---------|------------------------|
| **Variables Make** (`COMPOSE_BASE=`) | Ã‰viter de taper 3 km de chemin Ã  chaque fois. |
| **Cibles `.PHONY`** | DÃ©clarer quâ€™elles ne correspondent pas Ã  des fichiers ; Make les exÃ©cute toujours. |
| `##` aprÃ¨s une rÃ¨gle | Devient une *docstring* lisible via `make help` (si on ajoute une petite cible `help`). |
| Une cible = un scÃ©nario | Vous pouvez crÃ©er `make stress-test`, `make restore-db`, etc. |

---

### 5. Workflow conseillÃ©

1. **`make init`** : prÃ©pare lâ€™environnement Python local.  
2. **`make build`** : construit lâ€™image de votre appli.  
3. **`make start`** : dÃ©ploie lâ€™infrastructure complÃ¨te (attaque incluse).  
4. **`make logs`** : observe le comportement (trafic, erreurs, etc.).  
5. **`make stop` / `make clean`** : rangez tout avant de repartir.

---

### 6. Ressources pour aller plus loin

- *Compose file reference* (Docker docs) â€” toutes les clÃ©s possibles.
- *Modern Make* (blog) â€” bonnes pratiques Makefile.
- *Dive* (outil) â€” analysez la taille de vos images.
- *Hadolint* â€” linter Dockerfile.


how to do

pour les application python
cree un environnement virtuelle: python -m venv
installer le requirements.txt: pip install -r requirements.txt

docker

docker build
docker run 

-d: lancement en mode demon du conteneur il sera en rarriere plan

docker-compose

docker compose up: cherche le fichier docker-compose.yml et monte l'infra
docker compose -f f1 -f f2 ... up: vas fusionner les fichier docker compose en mergeant les valeurs afin de les override pour certain ou ajouter de la conf autre par tous les services on acces a l'aggregation complete de l'ensemble des fichier comme ressources

Makefile

Vous allez pouvoir mettre ici vos differents scenario sous forme de script. Le scenario generale consiste a par l'intermediaire de la simulation d'un attaquant perturber l'algorithme de load balancing