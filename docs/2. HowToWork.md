# üìö Guide d'utilisation du projet Docker & Monitoring

## 1. Organisation du projet

- Toutes vos **images Docker** sont pr√©sentes dans le dossier `docker/`.
- Les **scripts syst√®me** utiles sont disponibles dans le dossier `script/sys/`.
- Les **scripts d'exploitation** doivent √™tre plac√©s dans `script/exploits/`.

---

## 2. Cr√©er et lancer un workflow personnalis√©

Pour **cr√©er un nouveau workflow**, vous devez :
- Cr√©er un nouveau fichier de configuration Docker Compose (ex : `apache-jeremy-workflow.yml`, `nginx-workflow.yml`, etc.)

Pour **lancer un workflow**, utilisez la commande suivante :

```bash
docker compose -f ./monitoring.yml -f ./docker-compose.yml -f <votre_fichier_workflow.yml> up --build
```

### Exemple :
```bash
docker compose -f ./monitoring.yml -f ./docker-compose.yml -f ./nginx-workflow.yml up --build
```

---

## 3. Utiliser le Makefile

Pour faciliter l'ex√©cution, vous pouvez utiliser la commande suivante via le **Makefile** :

```bash
make workflow-attack-example
```

Cette commande :
- Lance `docker compose` automatiquement.
- D√©marre tous les outils n√©cessaires pour **analyser une attaque**.

---

## 4. Scripts syst√®mes disponibles (`script/sys/`)

| Script | Description |
|:---|:---|
| `docker-compose-scan-analysis.sh` | Analyse les images d√©finies dans un fichier `docker-compose.yml` et g√©n√®re un rapport `docker-compose-images-vuln.txt` listant toutes les vuln√©rabilit√©s (CVE) par image et d√©pendances. |
| `running-container-analysis.sh` | Analyse les conteneurs Docker **actuellement en cours d'ex√©cution** pour rep√©rer des vuln√©rabilit√©s ou anomalies. |

les rapport genere par les commandes:
- make run-project-analysis
- make running-container-analisis

et seront disponible dans le dossier "rapports"

---

## 5. Surveillance des tentatives d'attaque (Exporter Prometheus Custom)

Vous disposez √©galement d'un **exporter Prometheus Custom** :

- Il s'agit d'un **script Python**.
- Ce script **lit les logs** du serveur **Nginx**.
- Il **filtre et compte** le nombre de **tentatives d'attaques** venant d'IP malveillantes.
- Les r√©sultats sont expos√©s pour √™tre **visualis√©s dans Grafana** via Prometheus.
